<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Multi-modal spatial availability: a research proposal</title>
    <meta charset="utf-8" />
    <meta name="author" content="Anastasia Soukhov, J. Tarri침o Ortiz, J. A. Soria-Lara, A. P치ez" />
    <meta name="date" content="2022-11-10" />
    <script src="CIT-Presentation_files/header-attrs-2.20/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Multi-modal spatial availability: a research proposal
## CIT - Tenerife 2023
### Anastasia Soukhov, J. Tarri침o Ortiz, J. A. Soria-Lara, A. P치ez
### 2022-11-10

---













## Overview

**1.** Accessibility measures and multi-modal applications

**2.** Explaining **spatial availability** within multi-modal analysis

**3.** Policy scenario planning application: low emission zones in Madrid

**4.** Implications: the changes in spatial availability of opportunities, active mobility, GHG emissions

???
XXX
---
## Multi-modal accessibility measures

.pull-left[

#### Gravity-based accessibility (Hansen-type) - no competition

`$$A_i^m = \sum_{j}O_jf(c_{ij})^m$$`
-   `\(i\)` is a set of origin locations
-   `\(j\)` is a set of destination locations
-   `\(O_j\)` is the number of opportunities at location `\(j\)`
-   `\(f(\cdot)\)` is an impedance function of `\(c_{ij}\)` (cost of moving between `\(i\)` and `\(j\)`) for each mode `\(m\)`

**E.g.**, used in _(Tahmasbi et al., 2019)_.

Suffers from the same interpretability issues _(Handy and Niemeier, 1997; Miller et al., 2018)_.

Does not include competition (demand:supply or the mass effect) _(Shen, 1998; Merlin and Hu, 2018)_.

]

???

Interpretability issues are not resolved when considering multiple modes. 

**e.g.**, used in _(Tahmasbi et al., 2019)_ for quantify access `\(A_i\)` for `\(m\)` walking, public transit, and private car modes to retail store destinations (different `\(f^m(c_{ij}^m)\)` for each `\(m\)`)
- Suffers from the same interpretability issues _(Handy and Niemeier, 1997; Miller et al., 2018)_
- Does not include competition (demand:supply or the mass effect) _(Shen, 1998; Merlin and Hu, 2018)_

--

.pull-right[
]

???
Accessibility: 

- A way to relatively quantify the access that a spatial unit: a product of land-use and the population's means of transportation

- In other words, it measures the amount of _potential interaction_ a population has with opportunities _(Hansen, 1959)_

- It connects land-use and the population's means of transportation: the population are the people that live within the region and the opportunities are the destinations of interest to the population or of the transportation network itself. 
 
-**Hansen**-type accessibility - the sum of opportunities multiplied by a function which measures of the cost of moving between i and j.

- this measure suffers from interpretability issues - what is travel-cost adjusted opportunities? 

- it also doesn't consider competition, which has been shown to reflect empirical accessibility to competitive-opportunities worse than competitive accessibility measures. 

---
count: false
## Multi-modal accessibility measures

.pull-left[
#### Competitive accessibility (Shen-type) - no proportional allocation
Shen (1998) modified Hansen-type accessibility; popularized as the **two-step floating catchment approach (2SFCA)** by _(Luo and Wang, 2003)_

`$$S_i^m = \sum_j \frac{O_jf(c_{ij})^m}{\sum_m D_j^m}$$`

with:
`$$D_j^m = \sum_i P_{i}^m f(c_{ij})^m$$`
- `\(S_{i}^m\)` is Shen-type accessibility for each mode `\(m\)`
- `\(D_j^m\)` is the demand at `\(j\)` from `\(P_{i}\)` using each mode `\(m\)`

]

.pull-right[

It considers multi-model competition following the generalized:
`$$S_i = \sum_m \biggl(\frac{P_i^m}{P_i}\biggr) \sum_j \frac{O_jf(c_{ij})^m}{\sum_m \sum_i P_{i}^m f(c_{ij})^m}$$`

E.g., used by _Tao et al., 2020_.

However, the resulting value is an accessibility _score_ so interpretation is obfuscated _(Soukhov et al., 2023)_

]

???
- e.g., used by _Tao et al., 2020_ to calculate the `\(S_i^m\)` for `\(m\)` modes public transit and car to employment as well as the generalized accessibility `\(S_i\)`

- **Shen**-type accessibility - the sum of travel-cost adjusted opportunities (supply) divided by travel-cost adjusted demand! It considers travel-cost from both the opportunities perspective and the population side. It is done in 2 steps for the 2SFCA: "The first one computes the ratio between supply and demand of each health facility; the second step computes accessibility as the weighted sum of these ratios using a distance-decay function"

It should be mentioned that Weibull (1976) was the first to arrive to this same formula from axiomatic approach. Joseph and Bantock (1982) then applied it to health care access. 

---
### Impedance functions - quantifying how subsets of people travel

.left-column[

`\(f(c_{ij})^m\)` is a function of the cost of moving between `\(i\)` and `\(j\)` for modes `\(m\)`.

]

.right-column[]

---
count: false
### Impedance functions - quantifying how subsets of people travel

.left-column[

`\(f(c_{ij})^m\)` is a function of the cost of moving between `\(i\)` and `\(j\)` for modes `\(m\)`.

`\(f(c_{ij})^{t.behav.1} = \exp(-0.1\cdot c_{ij})\)`

]

.right-column[
![](CIT-Presentation_files/figure-html/comparison-impedance-functions-synthetic-example1-1.png)&lt;!-- --&gt;
]

---
count: false
### Impedance functions - quantifying how subsets of people travel

.left-column[

`\(f(c_{ij})^m\)` is a function of the cost of moving between `\(i\)` and `\(j\)` for modes `\(m\)`.

`\(f(c_{ij})^{\text{t.behav.1}} = \exp(-0.1\cdot c_{ij})\)`

`\(f(c_{ij})^{\text{t.behav.2}} = \exp(-0.6\cdot c_{ij})\)`

]

.right-column[
![](CIT-Presentation_files/figure-html/comparison-impedance-functions-synthetic-example2-1.png)&lt;!-- --&gt;
]

---
### Simulated example - Hansen-type accessibility (no competition or proportional allocation consideration)


.pull-left[

&lt;img src="Presentations/toy-example.png" width="5600" /&gt;

]

--

.pull-right[

`\(A_i^m = \sum_jO_jf(c_{ij})^m\)`

Impedance function: `\(f(c_{ij})^{\text{car}} = f(c_{ij})^{\text{pt}} =exp(-0.1 \cdot c_{ij})\)`; 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; i &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; m &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; A &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44999.80 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27292.18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44999.80 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27292.18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3745.89 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2240.38 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]


???
- explain the map; blue and orange dots are origins and employment centers respectively. Travel time within each center is 15 mins, travel time between sub and urban is 30 mins and travel time to the satellite town from sub / urban is 100 mins.

- then explain the accessibility formula; the impedance function is a negative exponential (Wilson 1971), beta 0.1, like in the example. Same for both modes.

- Accessibility can be interpreted as a score, such as, population center at A and B has the same _potential_ access to 27,292 jobs using transit and 44,999.80 jobs using car. It is difficult to understand the meaning of the value other than A and B have a higher score than C. 

- We know that the size of population matters. They are different in both A and B -- the population that uses transit is also different in both centers -- how does these two levels of differing demand size impact accessibility to opportunities? We can't use hansen-type measure without further processing.
---

### Synthetic example - Shen-type accessibility (no proportional allocation consideration)

.pull-left[
&lt;img src="Presentations/toy-example.png" width="5600" /&gt;
]

--

.pull-right[
`\(A_i^m\)` and `\(S_i^m = \sum_j \frac{O_j f(c_{ij})^m}{\sum_m \sum_i P_{i}^m f(c_{ij})^m}\)`


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; i &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; m &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; A &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; S &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44999.80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27292.18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.95 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44999.80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.03 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27292.18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.62 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3745.89 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.12 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2240.38 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.68 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
count: false
### Synthetic example - Shen-type accessibility (no proportional allocation consideration)

.pull-left[
&lt;img src="Presentations/toy-example.png" width="5600" /&gt;
]

--

.pull-right[
`\(S_i = \sum_m \biggl(\frac{P_i^m}{P_i}\biggr) \sum_j \frac{O_j f(c_{ij})^m}{\sum_m \sum_i P_{i}^m f(c_{ij})^m}\)`:
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; i &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; S &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.32 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.89 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.99 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

???

Now let's look at Shen's accessibility, same impedance function.

First and foremost, we see that Shen's accessibility can still be interpreted as as score, like Hansen-style accessibility. But it can also be interpreted as travel-cost adjusted jobs per travel-cost adjusted capita (potential supply over potential demand) per mode. 

It also accounts for competition between modes by weighted-sum of mode-specific population over the total population at that origin `\(i\)`. 

We can do better, let's use proportional allocation (NOTE: WHY??????????)

---
### Spatial availability - competitive _and_ proportional allocation

.pull-left[

- Spatial availability per origin and mode:

`\(V^m_{i} = \sum_{j=1}^J O_j\ F^{t,m}_{ij}\)`

- The proportional allocation factor combines two aspects of the problem, population and cost:

`\(F^{t,m}_{ij} = \frac{F^{pm}_{i} \cdot F^{cm}_{ij}}{\sum_{m=1}^M \sum_{i=1}^N F^{pm}_{i} \cdot F^{cm}_{ij}}\)`

- Where `\(F^{p,m}_{i}\)` is population allocation factor:

`\(F^{p,m}_{i} = \frac{P^m_{i}}{\sum_{i} P^m_{i}}\)`

- And the `\(F^{c,m}_{ij}\)` is a cost allocation factor:

`\(F^{c,m}_{ij} = \frac{f(c_{ij})^m}{\sum_{i} f(c_{ij})^m}\)`
]

--

.pull-right[

- Spatial availability per origin:

`\(V_{i} = \sum_{m=1}^M V^m_{i}\)`

- Considers **competition** and **proportionally allocates opportunities** (singly-constrained: `\(O = \sum_{j=1}^J O_j\)`)
]
???


- So let me introduce spatial availability, it consists of proportional allocation factors and the opportunities. the population allocation factor is the allocation of opportunities, proportional to the population size. It is always a proportion between 0 to 1. 

- The cost factor allocates opportunities proportionally based on the impedance function. The impedance function can be anything - gravity-based like Hansen, cumulative, etc. It is also always a proportion between 0 to 1. 

- You multiple both factors together and by opportunities --&gt; the number of opportunities are preserved! This is why you can just add up all the spatial availabilies per mode. It all sums up.

  -supply of population and demand for opportunities are both travel-cost and population adjusted
  - why singly-constrained? the sum of all accessibility values for i equals all the opportunities for i to j (like in a singly constrained gravity model - it is attraction constrained)

---
### Spatial availability - competitive _and_ proportional allocation

.pull-left[
&lt;img src="Presentations/toy-example.png" width="5600" /&gt;
]

--

.pull-right[

`\(V^m_{i} = \sum_{j=1}^J O_j\ F^{t,m}_{ij}\)` and `\(\frac{V^m_{i}}{P_{i}^m}\)`


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; i &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; m &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; V &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; v &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46945.73 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18973.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.95 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 102997.48 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.03 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31211.55 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.62 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7837.58 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.12 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2034.58 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.68 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---
count: false
### Spatial availability - competitive _and_ proportional allocation

.pull-left[
&lt;img src="Presentations/toy-example.png" width="5600" /&gt;
]

--

.pull-right[
`\(S_i\)` (eqv. to `\(\frac{V_i}{P_i}\)`) and `\(V_{i} = \sum_{m=1}^M V^m_{i}\)`

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; S &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; V &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1.32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65918.81 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.89 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 134209.03 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.99 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9872.16 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

--

- And finally, if you divide spatial availability by the population, it can be simply normalized to be opportunities available per capita. This is equivalent to Shen-style accessibility. Both competitive and singly-constrained 



???
XXX

---
### Madrid's low emission zones - a policy of modal discrimination

.pull-left[
&lt;img src="Presentations/madrid-region.png" width="80%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="Presentations/city-centre.png" width="50%" style="display: block; margin: auto;" /&gt;

- November 2018 - LEZ Centro
- 2023 - LEZ within M-30
- 2024 - LEZ within Madrid Municipality 
]

???
A NEEED for multi-modal analysis methods that are interpretive and comparative -- proportional allocation achieves that!
---
### Multi-modal home-to-work accessibility in Madrid: 2018 travel survey

.pull-left[
&lt;img src="Presentations/SA_i_V_zn1259_plot.png" width="80%" style="display: block; margin: auto;" /&gt;
Spatial Availability `\(V_i\)` at resolution Zona 1259
]

.pull-right[
&lt;img src="Presentations/SA_i_V_zn208_plot.png" width="80%" style="display: block; margin: auto;" /&gt;
Spatial Availability `\(V_i\)` at resolution Zona 208
]

???
- a need for multi-modal analysis to assess impacts of this geographic. The issue of MUAP.
---
class: center
### Multi-modal home-to-work accessibility in Madrid: 2018 travel survey
&lt;img src="Presentations/SA_im_V_zn1259_plot.png" width="45%" style="display: block; margin: auto;" /&gt;
Spatial Availability `\(V_i^m\)` at resolution Zona 1259

???
- With spatial availability you can compare between modes -- however still the issue of MUAP.

---
class: center
### Multi-modal home-to-work accessibility in Madrid: 2018 travel survey
&lt;img src="Presentations/SA_im_vv_zn1259_plot.png" width="70%" style="display: block; margin: auto;" /&gt;
Spatial Availability by `\(m\)` population ( `\(v_i^m\)` ) at resolution Zona 1259

???
- Can also benchmark between modes: the spatial avail per mode-using population per `\(i\)` -- however still the issue of MUAP
---
### Spatial availability: a way forward in multimodal transport and land-use planning

- Data-driven transport accessibility policy scenario creation

- Modifiable unit areal problem (MUAP) - need for logically consistent accessibility measurement method
  - Calculated travel time tessellation
  
- Questions of equity: which neighbourhoods and people _within_ neighbourhoods are not meeting the mark? 
  - Who will be most impacted? 


???
- policy scenario creation
- MUAP exists, seen in Madrid transport data, the need for simulated calculation and consistent aggregation of accessibility (through proportional allocation)
- Quantitatively, this method can be used to more interpetble answer these questions of equity. Socio-economic impact, GHG emissions, across sub-sets of population (multi-modal users included).

---
count: false
class: center, middle, inverse

## Acknowledgments

&lt;img src="Presentations/MJ_logo.png" width="20%" /&gt;

&lt;img src="Presentations/mcm-sci-sees_left-col.png" width="30%" /&gt;

### Any questions? Remarks?

#### Anastasia Soukhov, **soukhoa@mcmaster.ca** 

#### Spatial availability paper:
&lt;img src="Presentations/spatial-availability.png" width="10%" /&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current% / 12",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
