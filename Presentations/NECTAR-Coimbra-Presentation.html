<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Quantifying multi-modal competition using spatial availability</title>
    <meta charset="utf-8" />
    <meta name="author" content="Anastasia Soukhov, J. Tarri침o Ortiz, J. A. Soria-Lara, A. P치ez" />
    <script src="NECTAR-Coimbra-Presentation_files/header-attrs-2.25/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Quantifying multi-modal competition using spatial availability
]
.subtitle[
## NECTAR - Sustainable Neighbourhoods
]
.author[
### Anastasia Soukhov, J. Tarri침o Ortiz, J. A. Soria-Lara, A. P치ez
]
.date[
### 21-06-2023
]

---













## Accessibility competition between modes

**Motivation**: interpreting accessibility measures (location-based _potential interaction_) for policy interventions

&lt;img src="Presentation-images/access-demo.png" width="40%" style="display: block; margin: auto;" /&gt;

---
## Accessibility competition between modes

**Motivation**: interpreting accessibility measures (location-based _potential interaction_) for policy interventions

&lt;img src="Presentation-images/access-demo.png" width="40%" style="display: block; margin: auto;" /&gt;

### Overview

**1.** Types of current accessibility measures and their limitations

**2.** Multi-modal **spatial availability**

**3.** Planning accessibility policy interventions considering multi-modal competition

---
class: center, middle
## Classification of multi-modal accessibility measures

##### Hansen-type accessibility _(Hansen, 1959)_
_No competition_ and _unconstrained_: `\(S_i^m = \sum_j O_j f^m(c_{ij}^m)\)`

--

##### Shen-type accessibility _(Shen, 1998)_ and _(Luo and Wang, 2003)_
**Competitive** and _unconstrained_: `\(a_i^m = \sum_j \frac{O_jf^m(c_{ij}^m)}{\sum_m D_j^m}\)`

--

##### Spatial availability _(Soukhov et al., 2023)_
**Competitive** and **constrained**: `\(V_i^m = \sum_j O_j F^{t,m}_{ij}\)`

???

&lt;!-- for this slide--&gt;

Accessibility: a way to quantify the access that a spatial unit has, a product of land-use and the population's means of transportation. It measures the amount of _potential interaction_ a population has with opportunities _(Hansen, 1959)_

What do all these types of measures have in common? How they are a weighted sum of opportunities that can be interacted with. What differs between them is how they weight the opportunities.

---

### Simulated example: uncompetitive and unconstrained

.pull-left[

&lt;img src="Presentation-images/toy-example1.png" width="120%" /&gt;

]

--

.pull-right[

##### Hansen-type accessibility
`\(S_i^m = \sum_jO_jf^m(c_{ij}^m)\)` 

Impedance function: `\(f(c_{ij})^{\text{car}} = f(c_{ij})^{\text{pt}} =exp(-0.1 \cdot c_{ij}^m)\)`; 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; i &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; m &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; S &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44999.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27292.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44999.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27292.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3745.9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2240.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; TOTAL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 150570.2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]


???
- NOTE: the sum of all that is what it means to be unconstrained. Also, A and B are equal, that is what it means to be uncompetitive. 


- explain the map; blue and orange dots are origins and employment centers respectively. Travel time within each center is 15 mins, travel time between sub and urban is 30 mins and travel time to the satellite town from sub / urban is 100 mins.

- then explain the accessibility formula; the impedance function is a negative exponential (Wilson 1971), beta 0.1, like in the example. Same for both modes.

- Accessibility can be interpreted as a score, such as, population center at A and B has the same _potential_ access to 27,292 jobs using transit and 44,999.80 jobs using car. It is difficult to understand the meaning of the value other than A and B have a higher score than C. 

- We know that the size of population matters. They are different in both A and B -- the population that uses transit is also different in both centers -- how does these two levels of differing demand size impact accessibility to opportunities? We can't use hansen-type measure without further processing.
---

### Simulated example: competitive and unconstrained

.pull-left[
&lt;img src="Presentation-images/toy-example1.png" width="120%" /&gt;
]

--

.pull-right[

##### Shen-type accessibility
`\(a_i^m = \sum_j \frac{O_j f^m(c_{ij}^m)}{\sum_m \sum_i P_{i}^m f^m(c_{ij}^m)}\)`


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; i &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; m &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; a &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.95 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.05 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.63 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.12 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.68 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

???
-  ## NOTE: this is competitive for S. you have high access with less demand, A and B are different. It is still unconstrained when you try to retrieve the number of opportunities -- it is the totla population and not the job-seeking population 
---
### Simulated example: competitive and unconstrained

.pull-left[
&lt;img src="Presentation-images/toy-example1.png" width="120%" /&gt;

]

--

.pull-right[

##### Shen-type accessibility
`\(a_i = \sum_m \biggl(\frac{P_i^m}{P_i}\biggr) a_i^m\)`
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; i &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; a &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.36 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.88 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.99 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

???

Now let's look at Shen's accessibility, same impedance function.

First and foremost, we see that Shen's accessibility can still be interpreted as as score, like Hansen-style accessibility. But it can also be interpreted as travel-cost adjusted jobs per travel-cost adjusted capita (potential supply over potential demand) per mode. 

It also accounts for competition between modes by weighted-sum of mode-specific population over the total population at that origin `\(i\)`. 

---
### Spatial availability: competitive _and_ constrained

.pull-left[

- Spatial availability considering multi-modes:

`\(V^m_{i} = \sum_{j}^J O_j\ F^{t,m}_{ij}\)`

- The **proportional allocation factor** combines two aspects of the problem, population and cost:

`\(F^{t,m}_{ij} = \frac{F^{pm}_{i} \cdot F^{cm}_{ij}}{\sum_{m} \sum_{i} F^{pm}_{i} \cdot F^{cm}_{ij}}\)`

- Where `\(F^{p,m}_{i}\)` is **population allocation** factor:

`\(F^{p,m}_{i} = \frac{P^m_{i}}{\sum_{m}\sum_{i} P^m_{i}}\)`

- And the `\(F^{c,m}_{ij}\)` is a **cost allocation** factor:

`\(F^{c,m}_{ij} = \frac{f^m(c_{ij}^m)}{\sum_{m} \sum_{i} f^m(c_{ij}^m)}\)`
]

--

.pull-right[

##### Proportional allocation mechanism

- `\(V^m_{i}\)` is always singly-constrained: `\(\sum_{i} V_{i} = \sum_{m}\sum_{i} V_{i}^m = \sum_{j} O_j\)`

- So, one can calculate spatial availability....
  - **per `\(i\)`**: ( `\(V_{i} = \sum_{m} V^m_{i}\)` )
  - **per mode**: ( `\(v^{m} = \sum_{m} \sum_{i} V^m_{i}\)` )
  - **per capita in `\(i\)`**: ( `\(v_{i} = \sum_{m} \frac{V_i^m}{P_{i^m}}\)` )
  - Etc. etc.,

]

???
- So let me introduce spatial availability, it consists of proportional allocation factors and the opportunities. the population allocation factor is the allocation of opportunities, proportional to the population size. It is always a proportion between 0 to 1. 

- The cost factor allocates opportunities proportionally based on the impedance function. The impedance function can be anything - gravity-based like Hansen, cumulative, etc. It is also always a proportion between 0 to 1. 

- You multiple both factors together and by opportunities --&gt; the number of opportunities are preserved! This is why you can just add up all the spatial availabilies per mode. It all sums up.

-supply of population and demand for opportunities are both travel-cost and population adjusted

- why singly-constrained? the sum of all accessibility values for i equals all the opportunities for i to j (like in a singly constrained gravity model - it is attraction constrained)

- Can calculate spatial availability per `\(i\)`, or per capita in `\(i\)`, or per `\(m\)`. Per subset of population -- anything! This is also something that you couldn't just do with the Shen-type measure because it is unconstrained. 

---
### Simulated example: competitive _and_ constrained

.pull-left[

&lt;img src="Presentation-images/toy-example1.png" width="120%" /&gt;
]

--

.pull-right[

##### Spatial availability per origin and mode
`\(V^m_{i} = \sum_{j} O_j\ F^{t,m}_{ij}\)`


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; i &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; m &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; V &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 52021.13 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15768.20 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 94250.81 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 38081.84 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7842.25 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2035.78 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; TOTAL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 210000.00 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

???

- And finally, if you divide spatial availability by the population, it can be simply normalized to be opportunities available per capita. This is equivalent to Shen-style accessibility. Both competitive and singly-constrained 


---

### Simulated example: competitive _and_ constrained

.pull-left[
&lt;img src="Presentation-images/toy-example1.png" width="120%" /&gt;
]

--

.pull-right[

##### Spatial availability per origin, per mode
`\(V_{i} = \sum_{m} V^m_{i}\)`



&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; i &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; V &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; v &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 67789.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.36 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 132332.64 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.88 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9878.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.99 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; TOTAL &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 210000.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

`\(V^m = \sum_iV_i^m\)`

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; m &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; V &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; v &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; car &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 154114.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.65 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; pt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55885.81 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.35 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; TOTAL &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 210000.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]


???
XXX

---
### Madrid's low emission zones - a policy of modal discrimination

.pull-left[
&lt;img src="Presentation-images/madrid-region.png" width="80%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="Presentation-images/city-centre.png" width="50%" style="display: block; margin: auto;" /&gt;
- November 2018 - LEZ Centro
- 2023 - LEZ within M-30
- 2024 - LEZ within Madrid Municipality 
]

???
A NEEED for multi-modal analysis methods that are interpretive and comparative -- proportional allocation achieves that!
---
class: center
### Multi-modal home-to-work accessibility in Madrid: 2018 travel survey
&lt;img src="Presentation-images/im_populations_zn208_plot.png" width="70%" style="display: block; margin: auto;" /&gt;
Worker population, by mode, at resolution Zona 208

---
class: center
### Multi-modal home-to-work accessibility in Madrid: 2018 travel survey
&lt;img src="Presentation-images/Hansen_im_V_zn208_plot.png" width="70%" style="display: block; margin: auto;" /&gt;
Uncompetitive and unconstrained accessibility `\(S_i^m\)` at resolution Zona 208

???
1) totals don't add up - not constrained
2) uncompetive between modes

---
class: center
### Multi-modal home-to-work accessibility in Madrid: 2018 travel survey
&lt;img src="Presentation-images/SA_im_V_zn208_plot.png" width="70%" style="display: block; margin: auto;" /&gt;
Spatial Availability `\(V_i^m\)` at resolution Zona 208

???
- SA is better for transit/walk for centro. Car mode is limited in the centro. 
- those who live in the periphery have high accessibility, those are the ones who have cars and use transit. 

---
class: center
### Multi-modal home-to-work accessibility in Madrid: 2018 travel survey
&lt;img src="Presentation-images/SA_i_V_zn208_plot.png" width="70%" style="display: block; margin: auto;" /&gt;
Spatial Availability `\(V_i\)` at resolution Zona 208

???
- center -- high competition, for all modes and those that travel from close/far of the city.

---
class: middle
### Spatial availability: planning multi-modal transportation policy

- **Scenario evaluation**: accessibility when...
  - LEZ boundaries change
  - Vehicle characteristic restrictions change
  - Travel behaviour changes
  - Spatial unit of analysis changes

--

- **Questions of equity**: which neighbourhoods, what people, what modes?
  - GHG emission reductions
  - Advantages to non-car users
  - Who are impacted disproportionally


???
- policy scenario creation

- Quantitatively, this method can be used to more interpetble answer these questions of equity. Socio-economic impact, GHG emissions, across sub-sets of population (multi-modal users included).

&lt;!-- - MUAP exists, seen in Madrid transport data, the need for simulated calculation and consistent aggregation of accessibility (through proportional allocation) --&gt;

---
class: center, middle, inverse

## Acknowledgments

&lt;img src="Presentation-images/MJ_logo.png" width="20%" /&gt;

&lt;img src="Presentation-images/mcm-sci-sees_left-col.png" width="30%" /&gt;

### Any questions? Remarks?

#### Anastasia Soukhov, **soukhoa@mcmaster.ca** 

#### Spatial availability paper:
&lt;img src="Presentation-images/spatial-availability.png" width="10%" /&gt;

---
class: center, middle, inverse

#Extra slides

---
---
## Multi-modal accessibility measures

.pull-left[

#### No competition and unconstrained
##### Hansen-type accessibility

`$$S_i^m = \sum_{j}O_jf^m(c_{ij}^m)$$`
-   `\(m\)` is a set of modes
-   `\(i\)` is a set of origin locations
-   `\(j\)` is a set of destination locations
-   `\(O_j\)` is the number of opportunities at location `\(j\)`
-   `\(f(\cdot)\)` is an impedance function of `\(c_{ij}\)` for each mode `\(m\)` (a function of cost of moving between `\(i\)` and `\(j\)` for each mode `\(m\)`)

]

--
.pull-right[

**E.g.** used in _(Tahmasbi et al., 2019)_.

**Unconstrained** - suffers from the same interpretability issues _(Handy and Niemeier, 1997; Miller et al., 2018)_.

Does not include **competition** - no mass effect consideration _(Shen, 1998; Merlin and Hu, 2018)_.

]

???
1. Accessibility: a sum of opportunities.

2. E.g., it is used in Tahmasbi et al., 2019 to calculate accessibility per spatial unit per mode -- and compared across modes. Other literature has varied how the measure has been aggregated. 

It is unconstrained -- interpretability issues. The impedance function weights the opportunities, but what is a 'travel-cost adjusted potential opportunity' anyways? This difficulty in interpretation is a result of no global 'maximum' accessibility. difficult to make comparisons.

It is not competitive -- it does not consider demand for the opportunities in how the opportunities are summed. This does not include the 'mass effect' 

---
## Multi-modal accessibility measures

.pull-left[
#### Competition and unconstrained
##### Shen-type accessibility

Popularized as the **two-step floating catchment area (2SFCA) method** by _(Luo and Wang, 2003)_ (introduced by _Shen 1998_)

`$$a_i^m = \sum_j \frac{O_jf(c_{ij})^m}{\sum_m D_j^m}$$`

with:
`$$D_j^m = \sum_i P_{i}^m f(c_{ij})^m$$`
- `\(a_{i}^m\)` is Shen-type accessibility for each mode `\(m\)`
- `\(D_j^m\)` is the demand at `\(j\)` from `\(P_{i}\)` using each mode `\(m\)`

]

.pull-right[

Generalized multi-model competition:
`$$a_i = \sum_m \biggl(\frac{P_i^m}{P_i}\biggr) \sum_j \frac{O_jf(c_{ij})^m}{\sum_m \sum_i P_{i}^m f(c_{ij})^m}$$`

**E.g.**, used in _Tao et al., 2020_.

Though **competitive**, it is still **unconstrained** making interpretation difficult _(Soukhov et al., 2023)_

]

???
**Shen**-type accessibility - the sum of travel-cost adjusted opportunities (supply) divided by travel-cost adjusted demand! It considers travel-cost from both the opportunities perspective and the population side. It can be seen as an access score of the supply to demand.
 
To calculate the generalized version, access is calculated for each mode and then multiplied by the population weighted average.

It is used by some literature, such as _Tao et al. 2020_ and is competitive as it does consider demand. However it is still not constrained. The totals do not sum up to anything. The numerator and denominator's definitions are confusing (trust me). And now in the multi-modal case, the score is multiplied by the pop weighted average -- further difficult to understand.


---
### Proof: Spatial availability cancels out into Shen-style accessibility

Population allocation factor:
`\(F^p_{ij} = \frac{P_{i\in r}^\alpha}{\sum_{i}^K P_{i\in r}^\alpha}\)`

`\(F^p_{A} = \frac{P_{A}^\alpha}{P_{A}^\alpha + P_{B}^\alpha + P_{C}^\alpha}\)`

Cost allocation factor:
`\(F^c_{ij} = \frac{f(c_{ij})}{\sum_{i=A}^K f(c_{ij})}\)`

`\(F^c_{A1} = \frac{f(c_{A1})}{f(c_{A1})+f(c_{B1})+f(c_{C1})}\)`
`\(F^c_{B1} = \frac{f(c_{A2})}{f(c_{A2})+f(c_{B2})+f(c_{C2})}\)`
`\(F^c_{C1} = \frac{f(c_{A3})}{f(c_{A3})+f(c_{B3})+f(c_{C3})}\)`

Now let's put it together with P, and see how the denominators end up cancelling out:
`\(v_{i} = \sum_{j}\frac{O_j}{P_{i\in r}^\alpha}\frac{\frac{P_{i\in r}^\alpha}{\sum_{i}^K P_{i\in r}^\alpha} \cdot \frac{f(c_{ij})}{\sum_{i}^K f(c_{ij})}}{\sum_{i}^K \frac{P_{i\in r}^\alpha}{\sum_{i}^K P_{i\in r}^\alpha} \cdot \frac{f(c_{ij})}{\sum_{i}^K f(c_{ij})}}\)`

???

- we presented this formula to a few accessibility academics and because the way we explained it - from the perspective of proportional allocation - made it appear to be different than shen's. It was a surprise to see the denominators cancel out to equal shen's! 

---

`\(v_{A} = \frac{O_1}{P_{A}^\alpha}(\frac{\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{A1})}{f(c_{A1})+f(c_{B1})+f(c_{C1})}}{\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{A1})}{f(c_{A1})+f(c_{B1})+f(c_{C1})} + \frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{B1})}{f(c_{A1})+f(c_{B1})+f(c_{C1})}+ \frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{C1})}{f(c_{A1})+f(c_{B1})+f(c_{C1})}}) +\)`

`\(\frac{O_2}{P_{A}^\alpha}(\frac{\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{A2})}{f(c_{A2})+f(c_{B2})+f(c_{C2})}}{\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{A2})}{f(c_{A2})+f(c_{B2})+f(c_{C2})} + \frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{B2})}{f(c_{A2})+f(c_{B2})+f(c_{C2})}+\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{C2})}{f(c_{A2})+f(c_{B2})+f(c_{C2})}} )+\)`

`\(\frac{O_3}{P_{A}^\alpha}(\frac{\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{A3})}{f(c_{A3})+f(c_{B3})+f(c_{C3})}}{\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{A3})}{f(c_{A3})+f(c_{B3})+f(c_{C3})} + \frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{B3})}{f(c_{A3})+f(c_{B3})+f(c_{C3})}+\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{C3})}{f(c_{A3})+f(c_{B3})+f(c_{C3})}} )\)`

First, notice how the denominator on the denominator is the same across the summation? Let's simplify it:

`\(v_{A} = \frac{O_1}{P_{A}^\alpha}(\frac{\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{A1})}{f(c_{A1})+f(c_{B1})+f(c_{C1})}}{\frac{P_{A}^\alpha \cdot f(c_{A1}) + P_{A}^\alpha \cdot f(c_{B1}) + P_{A}^\alpha \cdot f(c_{C1})}{(P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha) \cdot (f(c_{A1})+f(c_{B1})+f(c_{C1}))}}) +\)`
`\(\frac{O_2}{P_{A}^\alpha}(\frac{\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{A2})}{f(c_{A2})+f(c_{B2})+f(c_{C2})}}{\frac{P_{A}^\alpha \cdot f(c_{A2}) + P_{A}^\alpha \cdot f(c_{B2}) + P_{A}^\alpha \cdot f(c_{C2})}{(P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha) \cdot (f(c_{A2})+f(c_{B2})+f(c_{C2}))}}) +\)`
`\(\frac{O_3}{P_{A}^\alpha}(\frac{\frac{P_{A}^\alpha}{P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha} \cdot \frac{f(c_{A3})}{f(c_{A3})+f(c_{B3})+f(c_{C3})}}{\frac{P_{A}^\alpha \cdot f(c_{A3}) + P_{A}^\alpha \cdot f(c_{B3}) + P_{A}^\alpha \cdot f(c_{C3})}{(P_{A}^\alpha+P_{B}^\alpha+P_{C}^\alpha) \cdot (f(c_{A3})+f(c_{B3})+f(c_{C3}))}} )\)`

See how the denominator of the denominator is the same as the denominator of the numerator's denominator for each J (J=1, J=2, and J=3)? Let's cancel those out and simplify:

`\(v_{A} = \frac{O_1}{P_{A}^\alpha}(\frac{P_{A}^\alpha \cdot f(c_{A1})}{P_{A}^\alpha \cdot f(c_{A1}) + P_{A}^\alpha \cdot f(c_{B1}) + P_{A}^\alpha \cdot f(c_{C1})} +\)`
`\(\frac{O_2}{P_{A}^\alpha}\frac{P_{A}^\alpha \cdot f(c_{A2})}{P_{A}^\alpha \cdot f(c_{A2}) + P_{A}^\alpha \cdot f(c_{B2}) + P_{A}^\alpha \cdot f(c_{C2})} +\)`
`\(\frac{O_3}{P_{A}^\alpha}\frac{P_{A}^\alpha \cdot f(c_{A3})}{P_{A}^\alpha \cdot f(c_{A3}) + P_{A}^\alpha \cdot f(c_{B3}) + P_{A}^\alpha \cdot f(c_{C3})} )\)`

---

Next, see how we can cancel out the `\(P_{A}^\alpha\)`? Let's do that.

`\(v_{A} = O_1(\frac{f(c_{A1})}{P_{A}^\alpha \cdot f(c_{A1}) + P_{B}^\alpha \cdot f(c_{B1}) + P_{C}^\alpha \cdot f(c_{C1})} + O_2\frac{f(c_{A2})}{P_{A}^\alpha \cdot f(c_{A2}) + P_{B}^\alpha \cdot f(c_{B2}) + P_{C}^\alpha \cdot f(c_{C2})} + O_3\frac{f(c_{A3})}{P_{A}^\alpha \cdot f(c_{A3}) + P_{B}^\alpha \cdot f(c_{B3}) + P_{C}^\alpha \cdot f(c_{C3})} )\)`





Shen's accessibility:

`\(S_i = \sum_j \frac{O_jf(c_{ij})}{\sum_kP_kf(c_{jk})}\)`

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current% / 17",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
